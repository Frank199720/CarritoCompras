<ng-template #modalProducto let-modal>
  <div class="modal-header">
    <h5 class="modal-title">{{accion}}</h5>
    
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col">
        <div class="form-group">
          <label for="recipient-name" class="col-form-label">Nombre:</label>
          <input
            type="text"
            class="form-control"
            id="nombre"
            [(ngModel)]="producto.pro_nombre"
          />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-7">
        <label for="recipient-name" class="col-form-label">Categoria:</label>
        <select class="form-control" [(ngModel)]="producto.dep_id">
          <option [value]="item.dep_id" *ngFor="let item of categoria">{{item.dep_nombre}}</option>
        </select>
      </div>
      <div class="col-3">
        <label for="recipient-name" class="col-form-label">Marca:</label>
        <select class="form-control" [(ngModel)]="producto.mar_id">
          <option [value]="item.mar_id" *ngFor="let item of marca">{{item.mar_nombre}}</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div class="form-group">
          <label for="recipient-name" class="col-form-label">Precio:</label>
          <input
            type="text"
            class="form-control"
            id="Precio"
            [(ngModel)]="producto.pro_precio"
            
          />
        </div>
      </div>
      <div class="col">
        <div class="form-group">
          <label for="recipient-name" class="col-form-label"
            >Stock minimo:</label
          >
          <input
            type="text"
            class="form-control"
            id="Stock"
            [(ngModel)]="producto.pro_stock"
          />
        </div>
      </div>
      <div class="col">
        <div class="form-group">
          <label for="recipient-name" class="col-form-label">Cantidad:</label>
          <input
            type="text"
            class="form-control"
            id="Cantidad"
            [(ngModel)]="producto.pro_cantidad"
          />
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" (click)="guardar()" class="btn btn-primary">
      Guardar
    </button>
    <button type="button" class="btn btn-secondary" data-dismiss="modal">
      Close
    </button>
  </div>
</ng-template>
<div class="container">
  <mat-card class="example-card">
    <mat-card-header>
      <mat-card-title>LISTA DE PRODUCTOS</mat-card-title>
      <mat-card-subtitle></mat-card-subtitle>
    </mat-card-header>

    <mat-divider></mat-divider>
    <mat-card-content>
      <div class="row">
        <div class="col-5">
          <label for="recipient-name" class="col-form-label">Categoria</label>
          <select class="form-control" [(ngModel)]="CategoriaSelected" (change)="searchForCategory()">
            <option [value]="item.dep_id" *ngFor="let item of categoria">{{item.dep_nombre}}</option>
          </select>
        </div>
      </div>
      <div class="row d-flex m-2">
        <div class="col">
          <input type="text"
          class="form-control"
          id="Cantidad"
          [(ngModel)]="search" 
          (input)="Busqueda(search)"
          placeholder="Busqueda">
          
        </div>
        <div class=" col d-flex">
          <button
          class="btn btn-primary btn-sm ml-auto"
            (click)="agregarProducto(modalProducto,true)"
          >
          <i class="fas fa-plus-square"></i>
          </button>
          <button
          class="btn btn-warning btn-sm"
            (click)="agregarProducto(modalProducto,false)"
          >
          <i class="fas fa-edit"></i>
          </button>
          <button
          class="btn btn-danger btn-sm"
            (click)="deleteProducto()"
          >
          <i class="fas fa-trash"></i>
          </button>
        </div>
        
      </div>
      <div id="myGrid" class="ag-theme-material" style="width: 100%; height: 100%">
        <ag-grid-angular
      #agGrid
      style="width: 100%px; height: 500px;"
      class="ag-theme-alpine"
      [rowData]="rowData"
      
      [columnDefs]="columnDefs"
      
      (gridReady)="onGridReady($event)"
      (selectionChanged)="onSelectionChanged($event)"
      rowSelection="single"
      [frameworkComponents]="frameworkComponents"
      >
    </ag-grid-angular>
      </div>
      
    </mat-card-content>
  </mat-card>
</div>
